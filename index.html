<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ART DEFICIT HARDCORE DISORDER</title>
    <style>
        :root {
            --bg: #050505;
            --fg: #e0e0e0;
            --dim: #444444;
            
            /* NEON PALETTE */
            --c1: #FF003C; /* Cyber Red */
            --c2: #04D9FF; /* Electric Blue */
            --c3: #FF2A6D; /* Hot Pink */
            --c4: #39FF14; /* Acid Green */
            --c5: #FAFF00; /* Safety Yellow */
            
            --font-main: 'Courier New', Courier, monospace;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            touch-action: manipulation;
        }

        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            background-color: var(--bg);
            color: var(--fg);
            font-family: var(--font-main);
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Scanlines - Optimized: reduced opacity, strictly visual overlay */
        .scanlines {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            pointer-events: none; z-index: 9999;
            opacity: 0.6; 
        }

        #app { width: 100%; height: 100%; display: flex; flex-direction: column; position: relative; }

        /* --- LANDING --- */
        #landing {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 100; background: var(--bg); padding: 20px; text-align: center;
            transition: opacity 0.5s ease;
            will-change: opacity; /* Hint to browser */
        }
        h1 { 
            font-size: clamp(2rem, 5vw, 3.5rem); line-height: 0.9; 
            border-bottom: 4px solid var(--c1); 
            padding-bottom: 20px; margin-bottom: 20px;
            text-transform: uppercase; letter-spacing: -2px;
        }
        h1 span { color: var(--c3); text-shadow: 2px 2px 0px var(--c2); }
        .subtitle { font-size: 0.8rem; color: var(--dim); margin-bottom: 40px; letter-spacing: 2px; }
        .btn {
            background: var(--fg); color: var(--bg); border: none; padding: 20px 50px;
            font-family: var(--font-main); font-size: 1.5rem; font-weight: bold;
            cursor: pointer; text-transform: uppercase; 
            box-shadow: 6px 6px 0px var(--c2);
            transition: transform 0.1s;
        }
        .btn:active { transform: translate(4px, 4px); box-shadow: 2px 2px 0px var(--c2); }

        /* --- DECK --- */
        #deck { display: none; width: 100%; height: 100%; perspective: 1200px; align-items: center; justify-content: center; }

        .card-container {
            width: 90vw; height: 80vh; max-width: 500px;
            position: relative; transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1.2);
            /* Performance Optimization: */
            will-change: transform; 
            transform: translateZ(0); 
        }
        .card-container.flipped { transform: rotateY(180deg); }
        .card-container.slide-out { animation: slideOut 0.4s forwards; }
        
        @keyframes slideOut { to { transform: rotateY(180deg) translateX(-150%) rotateZ(-10deg); opacity: 0; } }

        .face {
            position: absolute; width: 100%; height: 100%;
            backface-visibility: hidden; 
            border: 2px solid var(--fg);
            background: var(--bg); display: flex; flex-direction: column; 
            overflow: hidden;
            /* Optimized shadow: removed large blur radius */
            box-shadow: 0 0 20px rgba(0,0,0,0.8); 
        }

        /* BACK SIDE */
        .face.back { background-color: #080808; justify-content: center; align-items: center; }
        .pattern-bg {
            position: absolute; width: 100%; height: 100%; opacity: 0.2;
            background-image: radial-gradient(circle, var(--dim) 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .back-logo {
            font-size: 5rem; font-weight: 900; color: var(--dim); opacity: 0.4;
            border: 4px solid var(--dim); padding: 15px; transform: rotate(-5deg);
        }

        /* FRONT SIDE */
        .face.front { transform: rotateY(180deg); padding: 20px; position: relative; }
        
        .header {
            display: flex; justify-content: space-between; align-items: center;
            height: 30px; border-bottom: 1px solid var(--dim); margin-bottom: 10px;
            font-size: 0.7rem; color: var(--dim); letter-spacing: 1px;
            flex-shrink: 0;
        }
        .id-badge { background: var(--fg); color: var(--bg); padding: 2px 6px; font-weight: bold; }

        /* ARTWORK FOCUS */
        .visual-container {
            flex-grow: 1; 
            display: flex; justify-content: center; align-items: center;
            position: relative;
            padding: 10px;
            overflow: hidden;
        }

        svg {
            width: 100%; height: 100%;
            /* Removed drop-shadow filter for performance */
            overflow: visible;
        }

        /* Neon Classes - OPTIMIZED: Removed Filters, relied on colors */
        .s-white { stroke: var(--fg); stroke-width: 3; fill: none; }
        .s-dim { stroke: var(--dim); stroke-width: 2; fill: none; }
        .s-c1 { stroke: var(--c1); stroke-width: 3; fill: none; }
        .s-c2 { stroke: var(--c2); stroke-width: 3; fill: none; }
        .s-c3 { stroke: var(--c3); stroke-width: 3; fill: none; }
        .s-c4 { stroke: var(--c4); stroke-width: 3; fill: none; }
        .s-c5 { stroke: var(--c5); stroke-width: 3; fill: none; }

        .text-section {
            min-height: 140px;
            border-top: 1px solid var(--dim);
            padding-top: 15px;
            flex-shrink: 0;
        }
        .directive {
            font-size: clamp(1.4rem, 4vw, 2.2rem); 
            font-weight: bold; line-height: 1;
            text-transform: uppercase; margin-bottom: 10px;
            color: var(--fg);
        }
        .meaning {
            font-size: clamp(0.8rem, 3vw, 1rem); 
            color: #888; line-height: 1.35;
        }

        .footer-nav { 
            position: absolute; bottom: 30px; width: 100%; 
            text-align: center; font-size: 0.7rem; color: var(--dim); 
            z-index: 10; animation: blink 3s infinite;
        }
        @keyframes blink { 0%,100% {opacity: 1;} 50% {opacity: 0.3;} }
    </style>
</head>
<body>

    <div class="scanlines"></div>

    <div id="app">
        <div id="landing">
            <h1>ART DEFICIT<br><span>HARDCORE</span></h1>
            <div class="subtitle">VISUAL STRATEGY DECK</div>
            <button class="btn" onclick="startApp()">START</button>
            <div style="margin-top:20px; font-size: 0.7rem; color: #555">Yasar Needs Attention Y_Y</div>
        </div>

        <div id="deck" onclick="handleInteraction()">
            <div class="card-container" id="cardElement">
                <div class="face back">
                    <div class="pattern-bg"></div>
                    <div class="back-logo">Y_Y</div>
                </div>

                <div class="face front">
                    <div class="header">
                        <span class="id-badge" id="dispId">#001</span>
                        <span>DIAGNOSTIC_MODE</span>
                    </div>

                    <div class="visual-container" id="visualTarget">
                        </div>

                    <div class="text-section">
                        <div class="directive" id="dispText">Loading...</div>
                        <div class="meaning" id="dispMeaning">Loading...</div>
                    </div>
                </div>
            </div>
            <div class="footer-nav" id="navText">TAP TO FLIP</div>
        </div>
    </div>

    <script>
        // --- DATA ---
        // Complete dataset with syntax fixed
        const cards = [
          {id:1, text:"Repeat until it’s true.", meaning:"Repetition legitimizes a mistake; repeat a phrase 4 times to make it a hook.", visual:"Ouroboros"},
          {id:2, text:"Kill the intro.", meaning:"Start the song immediately with the vocal or the main hook; no buildup.", visual:"Scissors"},
          {id:3, text:"Steal the rhythm.", meaning:"Take the rhythm of a hit song’s melody but completely change the notes.", visual:"SplitDNA"},
          {id:4, text:"Drop the bass to speak.", meaning:"Cut the bass and drums right before the chorus hits to create impact.", visual:"Anchor"},
          {id:5, text:"The mistake is the hook.", meaning:"Keep the accidental vocal crack or wrong note; build the melody around it.", visual:"CrackedDiamond"},
          {id:6, text:"Halve the speed.", meaning:"Play the melody at half-time (slow) over the fast drums for contrast.", visual:"Snail"},
          {id:7, text:"Double the speed.", meaning:"Play the melody at double-time (fast) over slow drums to add energy.", visual:"Wing"},
          {id:8, text:"One note is enough.", meaning:"Write a melody that stays on one pitch while the chords move underneath it.", visual:"Brick"},
          {id:9, text:"Sing the drums.", meaning:"Record yourself beatboxing the rhythm, then replace it with real samples.", visual:"Mic"},
          {id:10, text:"Strip the chords.", meaning:"Mute the harmony instruments; let the bass and vocals carry the song.", visual:"Ribcage"},
          {id:11, text:"Make the lyrics dumber.", meaning:"Simplify complex poetry into conversational, primal phrases everyone understands.", visual:"Brain"},
          {id:12, text:"Phonetics over grammar.", meaning:"Choose words that sound good percussively, even if the meaning is vague.", visual:"Mouth"},
          {id:13, text:"Silence is loud.", meaning:"Put a hard stop/silence right after the busiest section of the song.", visual:"EmptyBubble"},
          {id:14, text:"Start at the end.", meaning:"Take the outro ad-libs and move them to the very beginning as an intro.", visual:"LeftArrow"},
          {id:15, text:"Tease the chorus.", meaning:"Play an instrumental or filtered version of the chorus early in the song.", visual:"Keyhole"},
          {id:16, text:"Change the instrument.", meaning:"If a riff sounds bad, play the exact same notes on a completely different sound.", visual:"Morph"},
          {id:17, text:"Lower the key.", meaning:"Transpose the song down 2 semitones to make the vocals sound warmer/richer.", visual:"StairsDown"},
          {id:18, text:"Raise the key.", meaning:"Transpose up 1 semitone to add urgency and energy to a dull track.", visual:"LadderUp"},
          {id:19, text:"Answer the question.", meaning:"Make the first phrase a 'question' (upward melody) and the second an 'answer'.", visual:"Chat"},
          {id:20, text:"Remove the third.", meaning:"Play power chords (root + 5th) to make the emotion ambiguous.", visual:"MissingDot"},
          {id:21, text:"Mumble the draft.", meaning:"Record a 'mumble track' to find the melody first, then fit words to the mumbles.", visual:"Blur"},
          {id:22, text:"Limit the range.", meaning:"Force the melody to stay within one octave so it's easy to sing along to.", visual:"Box"},
          {id:23, text:"Syncopate the vocal.", meaning:"If the drums are straight, make the vocals rhythmic and off-beat.", visual:"Dots"},
          {id:24, text:"Straighten the vocal.", meaning:"If the drums are busy, make the vocals hold long, straight notes.", visual:"Ruler"},
          {id:25, text:"Sample your own voice.", meaning:"Chop up a vocal take and play it like a synth lead.", visual:"Mirror"},
          {id:26, text:"Whisper the layer.", meaning:"Record a whisper track and layer it under the main vocal for texture.", visual:"Ghost"},
          {id:27, text:"Shout the layer.", meaning:"Record a shouting track, bury it low in the mix to add 'thickness.'", visual:"Megaphone"},
          {id:28, text:"Distort the pretty.", meaning:"Put distortion or saturation on a beautiful sound to give it edge.", visual:"Thorn"},
          {id:29, text:"Clean the dirty.", meaning:"Take a gritty sound and filter/reverb it until it sounds ethereal.", visual:"Soap"},
          {id:30, text:"Three element rule.", meaning:"Mute everything except the three most important elements at any moment.", visual:"Triangle"},
          {id:31, text:"Loop the first bar.", meaning:"Take the first bar of the chorus and repeat it 4 times. That’s your new hook.", visual:"Loop1"},
          {id:32, text:"Rhyme with the wrong word.", meaning:"Use a slant rhyme (e.g., 'home' and 'stone') instead of a perfect rhyme.", visual:"Puzzle"},
          {id:33, text:"Cut the fat.", meaning:"Remove the pre-chorus. Go straight from verse to chorus.", visual:"Knife"},
          {id:34, text:"Solo the rhythm.", meaning:"Listen to just the drums and vocals. Does it groove? If not, rewrite.", visual:"Drumstick"},
          {id:35, text:"Add a counter-melody.", meaning:"Add a high-pitched line that plays when the vocalist takes a breath.", visual:"Vines"},
          {id:36, text:"The bridge is a departure.", meaning:"Change the chord progression completely for the bridge. Go somewhere else.", visual:"BrokenBridge"},
          {id:37, text:"Return to home.", meaning:"Ensure the chorus melody lands firmly on the root note of the scale.", visual:"House"},
          {id:38, text:"Delay the resolution.", meaning:"Don't play the root chord until the very last beat of the loop.", visual:"Cliff"},
          {id:39, text:"Humanize the hi-hats.", meaning:"Manually adjust hi-hat velocities so no two hits are the same volume.", visual:"Hand"},
          {id:40, text:"Lock the kick.", meaning:"Quantize the kick drum perfectly to the grid to anchor the track.", visual:"Lock"},
          {id:41, text:"Space is an instrument.", meaning:"Treat the reverb tail as a musical part that fills the gaps between notes.", visual:"Helmet"},
          {id:42, text:"Make it mono.", meaning:"Check if the chorus still hits hard when played from a single phone speaker.", visual:"Eye"},
          {id:43, text:"High pass everything.", meaning:"Cut the low frequencies from everything except the kick and bass.", visual:"Cloud"},
          {id:44, text:"Saturate the bus.", meaning:"Apply mild distortion to the entire drum group to glue it together.", visual:"Tape"},
          {id:45, text:"Automate the energy.", meaning:"Slowly increase the volume or brightness as the song builds to the chorus.", visual:"Lightning"},
          {id:46, text:"Don’t bore us.", meaning:"Introduce a new sound or variation every 8 bars.", visual:"Hourglass"},
          {id:47, text:"Get to the chorus.", meaning:"Ensure the first chorus hits before the 1:00 mark (ideally by 0:45).", visual:"Stopwatch"},
          {id:48, text:"Reference the top.", meaning:"A/B test your mix against a professional track you admire immediately.", visual:"Mountain"},
          {id:49, text:"Unison power.", meaning:"Have the guitar and bass play the exact same riff for maximum power.", visual:"Hands"},
          {id:50, text:"Call and response.", meaning:"Make the instruments 'reply' to the vocal lines.", visual:"Phone"},
          {id:51, text:"Octave jump.", meaning:"Sing the second half of the verse an octave higher to build tension.", visual:"Jump"},
          {id:52, text:"The title is the lyric.", meaning:"Ensure the song title appears in the lyrics of the chorus.", visual:"Book"},
          {id:53, text:"Rhythmic contrast.", meaning:"If melody is fast, make chords long. If melody is slow, make chords rhythmic.", visual:"Jagged"},
          {id:54, text:"Use a placeholder.", meaning:"Sing nonsense syllables ('da da da') to lock the melody, write words later.", visual:"Dummy"},
          {id:55, text:"Switch the beat.", meaning:"Change the drum pattern from half-time to four-on-the-floor in the last chorus.", visual:"Flip"},
          {id:56, text:"Dry vocals upfront.", meaning:"Remove reverb from the lead vocal to make it feel intimate and present.", visual:"Face"},
          {id:57, text:"Widen the backing.", meaning:"Keep lead vocal center, pan backing vocals hard left/right.", visual:"Speakers"},
          {id:58, text:"Filter the intro.", meaning:"Start the song sounding 'underwater' and open it up when the beat drops.", visual:"Funnel"},
          {id:59, text:"Crowd vocals.", meaning:"Record yourself singing the hook 10 times and layer it to sound like a gang.", visual:"Crowd"},
          {id:60, text:"Borrow a structure.", meaning:"Copy the exact bar-count structure of a hit song (Intro-Verse-Chorus-etc).", visual:"Blueprint"},
          {id:61, text:"Use a foley sound.", meaning:"Use a recording of keys jingling or a door slamming as a percussion element.", visual:"Keys"},
          {id:62, text:"Delete the reverb.", meaning:"Make the verse completely dry so the chorus feels huge when reverb hits.", visual:"Sun"},
          {id:63, text:"Commit to audio.", meaning:"Bounce the MIDI to audio so you stop tweaking the synth settings.", visual:"Ice"},
          {id:64, text:"Finish the track.", meaning:"A finished average song is better than an unfinished masterpiece.", visual:"Flag"},
          {id:65, text:"Trust the first take.", meaning:"The first vocal recording often has the most emotion. Keep it.", visual:"Signature"},
          {id:66, text:"Break the rules.", meaning:"If it sounds good, ignore every card in this deck.", visual:"Hammer"},
          {id:67, text:"Ear candy every 4 bars.", meaning:"Add a subtle sound effect, fill, or vocal chop every 4 bars to keep attention.", visual:"Candy"},
          {id:68, text:"Duck the ambience.", meaning:"Sidechain the reverb/delay to the vocal so it dips when you sing and swells when you stop.", visual:"Duck"},
          {id:69, text:"Create a moment.", meaning:"Drop all instruments except the vocal for one beat before the final chorus.", visual:"Flash"},
          {id:70, text:"Align the skins.", meaning:"Tune your drum samples to the key of the song.", visual:"Wrench"},
          {id:71, text:"Find the resonant peak.", meaning:"Sweep a narrow EQ boost to find harsh frequencies, then cut them.", visual:"Bell"},
          {id:72, text:"Parallel process.", meaning:"Mix a heavily distorted version of the drums underneath the clean version.", visual:"Parallel"},
          {id:73, text:"Widen the top.", meaning:"Use a stereo widener only on frequencies above 5kHz.", visual:"InvertedTri"},
          {id:74, text:"Center the bottom.", meaning:"Force everything below 120Hz into mono to tighten the mix.", visual:"Seabed"},
          {id:75, text:"The telephone trick.", meaning:"Bandpass the vocal (cut lows and highs) for a bridge or intro effect.", visual:"Rotary"},
          {id:76, text:"Layer the snap.", meaning:"Layer a recorded finger snap or clap over the electronic snare for texture.", visual:"Snap"},
          {id:77, text:"Ghost the snare.", meaning:"Add very quiet snare hits between the main beats to add groove.", visual:"FaintCircle"},
          {id:78, text:"Arpeggiate the chord.", meaning:"Instead of strumming, play the chord notes one by one in a rhythm.", visual:"Stairs"},
          {id:79, text:"Invert the bass.", meaning:"If the chord is C Major, play an E on the bass (1st inversion) to create tension.", visual:"NoteFlip"},
          {id:80, text:"Pedal the tone.", meaning:"Keep the bass note the same while the chords change above it.", visual:"Pedal"},
          {id:81, text:"Walk the bass.", meaning:"Connect two chords by playing scalar notes in the bass between them.", visual:"Foot"},
          {id:82, text:"Slide into the note.", meaning:"Use a pitch bend or slide to scoop up into the main melody note.", visual:"Slide"},
          {id:83, text:"Gate the stutter.", meaning:"Use a rhythmic noise gate to turn a sustained pad into a percussion element.", visual:"Fence"},
          {id:84, text:"Re-amp the soft.", meaning:"Play a soft-synth through a real guitar amp and record it to add 'air.'", visual:"Amp"},
          {id:85, text:"Check the car.", meaning:"If the mix doesn't sound good in a car, the mix isn't done.", visual:"Car"},
          {id:86, text:"Check the door.", meaning:"Listen to your track from the next room. What stands out? What is missing?", visual:"Door"},
          {id:87, text:"Reference pink noise.", meaning:"Balance your track levels against a pink noise generator.", visual:"Static"},
          {id:88, text:"Change the environment.", meaning:"If you are stuck, change the lighting in your room or go to a coffee shop.", visual:"Palm"},
          {id:89, text:"Specifics over generics.", meaning:"Don't write 'I drove my car.' Write 'I drove my 98 Honda.'", visual:"Scope"},
          {id:90, text:"Show, don't tell.", meaning:"Don't say 'I was sad.' Describe the rain on the window.", visual:"EyeFilm"},
          {id:91, text:"The twist ending.", meaning:"Change the meaning of the chorus lyrics in the final repetition.", visual:"Knot"},
          {id:92, text:"Rename the project.", meaning:"Psychologically reset by 'Save As' > 'Song Title_Final_V1'.", visual:"Folder"},
          {id:93, text:"Five minute limit.", meaning:"Give yourself 5 minutes to finish a specific task. Speed prevents overthinking.", visual:"Timer"},
          {id:94, text:"Bounce in place.", meaning:"Render the MIDI to audio immediately to commit to the sound.", visual:"Ball"},
          {id:95, text:"Template update.", meaning:"Save your current channel strips as a template for the next song.", visual:"Grid"},
          {id:96, text:"Clone the memory.", meaning:"Backup your project. Right now.", visual:"Drives"},
          {id:97, text:"Export and listen.", meaning:"You can't judge a mix while looking at the waveforms. Export it and listen.", visual:"Export"},
          {id:98, text:"Color code.", meaning:"Organize your tracks by color (Drums=Red, Bass=Blue) for mental clarity.", visual:"Rainbow"},
          {id:99, text:"Group the bus.", meaning:"Send all drums to one fader. Process them as a single instrument.", visual:"Bus"},
          {id:100, text:"De-ess the bright.", meaning:"Use a de-esser to tame harsh 'S' and 'T' sounds on vocals and cymbals.", visual:"MuteSnake"},
          {id:101, text:"Check the phase.", meaning:"Flip the phase button on your drums. If bass increases, keep it.", visual:"Cancel"},
          {id:102, text:"Listen low.", meaning:"Turn the volume way down. If you can hear the vocal and snare, the balance is good.", visual:"Knob"},
          {id:103, text:"Swap the sample.", meaning:"If the kick drum isn't working, don't EQ it. Just replace the sample.", visual:"Recycle"}
        ];

        // --- GRAPHICS ENGINE ---
        function generateIcon(tag) {
            const s = (c) => `<svg viewBox="0 0 100 100">${c}</svg>`;
            
            // Randomly pick a neon color class for procedural variance
            const rc = () => [`s-c1`, `s-c2`, `s-c3`, `s-c4`, `s-c5`][Math.floor(Math.random()*5)];

            switch(tag) {
                case "Ouroboros":
                    return s(`
                        <circle cx="50" cy="50" r="35" stroke-dasharray="160" transform="rotate(-45 50 50)" class="${rc()}" />
                        <path d="M75 50 L85 45 L85 55 Z" fill="none" class="${rc()}" />
                        <circle cx="50" cy="50" r="20" class="${rc()}" opacity="0.5" />
                    `);
                case "Scissors":
                    return s(`
                        <line x1="20" y1="20" x2="80" y2="80" class="${rc()}" />
                        <line x1="80" y1="20" x2="20" y2="80" class="${rc()}" />
                        <circle cx="20" cy="20" r="4" class="s-white" />
                        <circle cx="20" cy="80" r="4" class="s-white" />
                    `);
                case "Triangle":
                    return s(`
                        <polygon points="50,15 85,85 15,85" class="${rc()}" />
                        <circle cx="50" cy="55" r="10" class="${rc()}" />
                    `);
                case "SplitDNA":
                    return s(`
                        <path d="M30 10 Q60 50 30 90" class="${rc()}" />
                        <path d="M70 10 Q40 50 70 90" class="${rc()}" />
                        <line x1="30" y1="30" x2="70" y2="30" class="s-dim" opacity="0.5" stroke="white"/>
                        <line x1="30" y1="70" x2="70" y2="70" class="s-dim" opacity="0.5" stroke="white"/>
                    `);
                case "Stop":
                    return s(`
                        <rect x="20" y="20" width="60" height="60" class="${rc()}" />
                        <line x1="20" y1="20" x2="80" y2="80" class="${rc()}" />
                        <line x1="80" y1="20" x2="20" y2="80" class="${rc()}" />
                    `);
                case "Speaker":
                    return s(`
                         <circle cx="50" cy="50" r="30" class="${rc()}" />
                         <circle cx="50" cy="50" r="10" class="${rc()}" />
                         <path d="M10 20 Q30 50 10 80" class="${rc()}" fill="none" />
                         <path d="M90 20 Q70 50 90 80" class="${rc()}" fill="none" />
                    `);
                 case "Flash":
                    return s(`
                        <polygon points="40,5 60,5 45,45 75,45 35,95 50,55 20,55" class="${rc()}" fill="none" />
                    `);
                default:
                    return generateGlitchArt(rc);
            }
        }

        function generateGlitchArt(colorFn) {
            let inner = '';
            // Generate multiple shapes with different colors
            const count = 5;
            
            for(let i=0; i<count; i++) {
                const cls = colorFn(); // Get random neon color
                const type = Math.random();
                const x1 = Math.floor(Math.random()*100);
                const y1 = Math.floor(Math.random()*100);
                
                if (type < 0.4) {
                    inner += `<line x1="${x1}" y1="${y1}" x2="${Math.random()*100}" y2="${Math.random()*100}" class="${cls}" />`;
                } else if (type < 0.7) {
                     inner += `<circle cx="${x1}" cy="${y1}" r="${Math.random()*25}" class="${cls}" />`;
                } else {
                     inner += `<rect x="${x1}" y="${y1}" width="${Math.random()*40}" height="${Math.random()*40}" class="${cls}" />`;
                }
            }
            return `<svg viewBox="0 0 100 100">${inner}</svg>`;
        }

        // --- APP LOGIC ---
        let deck = [], index = 0, isFlipped = false, animating = false;

        function shuffle(arr) {
            return arr.sort(() => Math.random() - 0.5);
        }

        function startApp() {
            document.getElementById('landing').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('landing').style.display = 'none';
                document.getElementById('deck').style.display = 'flex';
                deck = shuffle([...cards]);
                loadCard(0);
            }, 500);
        }

        function loadCard(i) {
            const c = deck[i];
            document.getElementById('dispId').innerText = `#${String(c.id).padStart(3, '0')}`;
            document.getElementById('dispText').innerText = c.text;
            document.getElementById('dispMeaning').innerText = c.meaning;
            document.getElementById('visualTarget').innerHTML = generateIcon(c.visual);
        }

        function handleInteraction() {
            if (animating) return;
            const card = document.getElementById('cardElement');
            const nav = document.getElementById('navText');

            if (!isFlipped) {
                card.classList.add('flipped');
                isFlipped = true;
                nav.innerText = "TAP FOR NEXT";
                nav.style.color = "var(--c1)";
            } else {
                animating = true;
                card.classList.add('slide-out');
                setTimeout(() => {
                    isFlipped = false;
                    card.classList.remove('flipped', 'slide-out');
                    index = (index + 1) % deck.length;
                    if(index === 0) deck = shuffle([...cards]); 
                    loadCard(index);
                    nav.innerText = "TAP TO FLIP";
                    nav.style.color = "var(--dim)";
                    animating = false;
                }, 400);
            }
        }
    </script>
</body>
</html>
