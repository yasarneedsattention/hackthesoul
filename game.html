<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GLYPH-GRIND // PUNK_RETAIL</title>
    <style>
        :root {
            --bg: #000; --gba: #1a1a1a; --safety: #FF4500; --acid: #CCFF00;
            --font: 'Courier New', monospace;
        }
        * { box-sizing: border-box; touch-action: manipulation; user-select: none; }
        body, html { margin: 0; padding: 0; background: #000; font-family: var(--font); height: 100vh; display: flex; justify-content: center; align-items: center; overflow: hidden; }

        /* GBA SHELL */
        #gba {
            width: 95vw; max-width: 750px; aspect-ratio: 1.6;
            background: var(--gba); border-radius: 40px; padding: 15px;
            display: grid; grid-template-columns: 1fr 3.5fr 1fr; align-items: center;
            box-shadow: 0 10px 0 #000; border: 4px solid #333;
        }

        /* SCREEN */
        #screen { height: 90%; background: #000; border-radius: 10px; padding: 5px; position: relative; overflow: hidden; }
        #view { width: 100%; height: 100%; background: #FFF; position: relative; overflow: hidden; }

        /* PUNK BACKGROUND */
        #bg-slogan { position: absolute; font-size: 5rem; font-weight: 900; color: rgba(0,0,0,0.05); top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1; pointer-events: none; }
        #graffiti { position: absolute; font-size: 10px; font-weight: 900; color: var(--safety); top: 10px; left: 10px; z-index: 2; }

        /* START SCREEN */
        #menu { position: absolute; inset: 0; background: #FFF; z-index: 1000; display: flex; flex-direction: column; padding: 15px; border: 4px solid #000; }
        .row { display: flex; gap: 5px; overflow-x: auto; padding: 5px 0; margin-bottom: 5px; }
        .swatch { width: 25px; height: 25px; border: 2px solid #000; cursor: pointer; flex-shrink: 0; }
        .m-btn { padding: 5px; border: 2px solid #000; font-size: 8px; font-weight: 900; cursor: pointer; background: #EEE; }
        .m-btn.on { background: var(--safety); color: #FFF; }

        /* PLAYER & STYLISH ENEMIES */
        #player { position: absolute; left: 40px; width: 40px; height: 60px; z-index: 500; }
        .head { width: 35px; height: 35px; background: #000; border: 2px solid #000; border-radius: 12% 25% 10% 15%; position: relative; display: flex; justify-content: center; align-items: center; }
        .torso { width: 40px; height: 25px; background: #000; margin-top: 1px; color: #FFF; font-size: 7px; font-weight: 900; display: flex; justify-content: center; align-items: center; border: 2px solid #000; }
        .ears { display: none; position: absolute; top: -10px; width: 100%; justify-content: space-between; }
        .ear { width: 10px; height: 15px; background: inherit; clip-path: polygon(50% 0, 0 100%, 100% 100%); }
        .teeth { width: 20px; height: 6px; background: #FFF; clip-path: polygon(0 0, 20% 100%, 40% 0, 60% 100%, 80% 0, 100% 100%, 100% 0); margin-top: 15px; display: none; }

        .gatekeeper { position: absolute; background: #000; width: 60px; right: -70px; border: 4px solid #000; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .eye { width: 10px; height: 10px; background: var(--acid); border-radius: 50%; box-shadow: 0 0 10px var(--acid); margin: 5px; }

        /* CONTROLS */
        .side { display: flex; flex-direction: column; align-items: center; gap: 10px; }
        .btn-a { width: 50px; height: 50px; background: var(--safety); border-radius: 50%; display: flex; justify-content: center; align-items: center; color: #FFF; font-weight: 900; box-shadow: 0 4px 0 #000; cursor: pointer; }
        .btn-a:active { transform: translateY(3px); box-shadow: 0 1px 0 #000; }
        .hint { font-size: 7px; color: #666; text-align: center; }

        /* OVERLAYS */
        #over { position: absolute; inset: 0; background: rgba(0,0,0,0.9); display: none; flex-direction: column; justify-content: center; align-items: center; color: #FFF; z-index: 5000; }
        #score { position: absolute; top: 10px; right: 10px; font-weight: 900; font-size: 20px; z-index: 100; }
    </style>
</head>
<body onmousedown="jump()" ontouchstart="jump()">

<div id="gba">
    <div class="side"><div style="font-size:30px; color:#222">âœš</div><div class="hint">PC: SPACE<br>PH: TAP SCREEN</div></div>

    <div id="screen">
        <div id="view">
            <div id="bg-slogan">VOID</div>
            <div id="graffiti">"RECLAIM_THE_FRAME"</div>
            <div id="score">0</div>

            <div id="menu">
                <div style="font-size:18px; font-weight:900; border-bottom:4px solid #000;">"DESIGNER_LAB"</div>
                <div style="font-size:8px; margin:5px 0;">COLOR_PALETTE</div>
                <div class="row" id="colors"></div>
                <div style="font-size:8px; margin:5px 0;">MODS</div>
                <div class="row">
                    <div class="m-btn" id="m-ears" onclick="mod('ears')">EARS</div>
                    <div class="m-btn" id="m-teeth" onclick="mod('teeth')">TEETH</div>
                </div>
                <button onclick="boot()" style="width:100%; margin-top:auto; padding:12px; background:#000; color:#FFF; font-weight:900; border:none; cursor:pointer;">START GAME</button>
            </div>

            <div id="player">
                <div class="ears" id="p-ears"><div class="ear"></div><div class="ear"></div></div>
                <div class="head" id="p-head"><div class="teeth" id="p-teeth"></div></div>
                <div class="torso" id="p-torso">"USER"</div>
            </div>

            <div id="over">
                <h1 style="color:var(--safety)">GAME OVER</h1>
                <p>SCORE: <span id="final">0</span></p>
                <button onclick="location.reload()" style="padding:10px 20px; font-family:inherit; font-weight:900; cursor:pointer;">RESTART</button>
            </div>
        </div>
    </div>

    <div class="side">
        <div class="btn-a" onclick="jump()">A</div>
        <div class="hint">PC: SPACE<br>PH: TAP A</div>
    </div>
</div>

<script>
    const cfg = { color: '#000', ears: false, teeth: false };
    const game = { active: false, y: 150, vy: 0, gravity: 0.35, lift: -6.5, pipes: [], frame: 0, score: 0 };
    const palette = ['#000', '#FF4500', '#CCFF00', '#FF00FF', '#00FFFF', '#FFF', '#8A2BE2', '#FFD700'];
    const slogans = ["VOID", "ANTI-AI", "BOOTLEG", "RETAIL", "PUNK"];
    const graffiti = ["VOID_YOUR_FEED", "HUMAN_MADE", "ANTI_ALGO", "STAY_STATIC"];

    // Menu Setup
    palette.forEach(c => {
        const s = document.createElement('div');
        s.className = 'swatch'; s.style.background = c;
        s.onclick = () => { cfg.color = c; draw(); };
        document.getElementById('colors').appendChild(s);
    });

    function mod(t) {
        cfg[t] = !cfg[t];
        document.getElementById('m-'+t).classList.toggle('on');
        draw();
    }

    function draw() {
        const h = document.getElementById('p-head'), t = document.getElementById('p-torso');
        h.style.background = t.style.background = cfg.color;
        h.style.borderColor = (cfg.color === '#FFF') ? '#000' : '#FFF';
        t.style.color = (cfg.color === '#FFF') ? '#000' : '#FFF';
        document.getElementById('p-ears').style.display = cfg.ears ? 'flex' : 'none';
        document.getElementById('p-teeth').style.display = cfg.teeth ? 'block' : 'none';
        document.querySelectorAll('.ear').forEach(e => e.style.background = cfg.color);
    }

    function jump() { if(game.active) game.vy = game.lift; }
    window.onkeydown = (e) => { if(e.code === 'Space') jump(); };

    function boot() {
        game.active = true;
        document.getElementById('menu').style.display = 'none';
        loop();
    }

    function spawn() {
        const gap = 160, topH = Math.random() * 120 + 20;
        const top = document.createElement('div');
        top.className = 'gatekeeper'; top.style.height = topH + 'px'; top.style.top = '0';
        top.innerHTML = '<div class="eye"></div><div style="font-size:6px; color:white; font-weight:900;">BOT</div>';
        
        const bot = document.createElement('div');
        bot.className = 'gatekeeper'; bot.style.top = (topH + gap) + 'px'; bot.style.bottom = '0';
        bot.innerHTML = '<div style="font-size:6px; color:white; font-weight:900; margin-bottom:5px;">VOID</div><div class="eye"></div>';
        
        document.getElementById('view').appendChild(top);
        document.getElementById('view').appendChild(bot);
        game.pipes.push({ x: 400, top, bot, passed: false });
    }

    function loop() {
        if(!game.active) return;
        game.frame++; game.vy += game.gravity; game.y += game.vy;
        const pEl = document.getElementById('player');
        pEl.style.top = game.y + 'px';
        pEl.style.transform = `rotate(${Math.min(game.vy * 3, 30)}deg)`;

        if(game.y < -10 || game.y > 340) die();
        if(game.frame % 100 === 0) spawn();

        game.pipes.forEach((p, i) => {
            p.x -= 2.5; p.top.style.left = p.bot.style.left = p.x + 'px';
            if(p.x < 80 && p.x > 10) {
                const hT = parseInt(p.top.style.height), hB = parseInt(p.bot.style.top);
                if(game.y < hT || (game.y + 50) > hB) die();
            }
            if(!p.passed && p.x < 40) {
                p.passed = true; game.score++;
                document.getElementById('score').innerText = game.score;
                if(game.score % 5 === 0) {
                    document.getElementById('bg-slogan').innerText = slogans[Math.floor(Math.random()*slogans.length)];
                    document.getElementById('graffiti').innerText = graffiti[Math.floor(Math.random()*graffiti.length)];
                }
            }
            if(p.x < -70) { p.top.remove(); p.bot.remove(); game.pipes.splice(i, 1); }
        });
        requestAnimationFrame(loop);
    }

    function die() {
        game.active = false;
        document.getElementById('final').innerText = game.score;
        document.getElementById('over').style.display = 'flex';
    }

    draw();
</script>
</body>
</html>
