<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GLYPH-GRIND // ANTI-ROT</title>
    <style>
        :root {
            --bg: #000; --fg: #FFF; --safety: #FF4500; --acid: #CCFF00;
            --pink: #FF00FF; --cyan: #00FFFF; --font: 'Courier New', monospace;
        }
        * { box-sizing: border-box; touch-action: manipulation; user-select: none; }
        body, html { 
            margin: 0; padding: 0; background: #000; 
            font-family: var(--font); height: 100vh; overflow: hidden; 
            display: flex; flex-direction: column; align-items: center; 
        }

        #game-container { 
            width: 100vw; height: 100vh; max-width: 500px; 
            border: 4px solid #FFF; position: relative; overflow: hidden; 
            display: flex; flex-direction: column;
        }

        /* DESIGNER DOCK */
        #dock { 
            background: #FFF; color: #000; padding: 10px; 
            border-bottom: 6px solid var(--safety); z-index: 1000;
        }
        .dock-row { display: flex; gap: 5px; overflow-x: auto; padding: 5px 0; scrollbar-width: none; }
        .dock-row::-webkit-scrollbar { display: none; }
        .btn { 
            flex: 0 0 auto; border: 2px solid #000; padding: 5px 10px; 
            font-size: 10px; font-weight: 900; cursor: pointer; background: #FFF; 
        }
        .btn.active { background: #000; color: #FFF; }

        /* VIEWPORT */
        #viewport { flex-grow: 1; position: relative; background: #111; overflow: hidden; }
        #venue-text { 
            position: absolute; font-size: 6rem; font-weight: 900; 
            color: rgba(255,255,255,0.08); top: 50%; left: 50%; 
            transform: translate(-50%, -50%); z-index: 1; pointer-events: none; 
            text-align: center; width: 100%;
        }
        .punk-quote { 
            position: absolute; font-size: 11px; color: var(--acid); 
            font-weight: 900; z-index: 2; opacity: 0.7; pointer-events: none;
        }

        /* PLAYER & ASSETS */
        .player { position: absolute; bottom: 60px; left: 40px; width: 50px; height: 80px; z-index: 50; }
        .head { 
            width: 40px; height: 40px; background: #000; border: 2px solid #FFF; 
            border-radius: 10% 25% 10% 15%; position: relative; 
            display: flex; justify-content: center; align-items: center;
        }
        .teeth { display: none; width: 20px; height: 8px; background: #FFF; clip-path: polygon(0 0, 20% 100%, 40% 0, 60% 100%, 80% 0, 100% 100%, 100% 0); margin-top: 15px; }
        .ears { display: none; position: absolute; top: -12px; width: 100%; justify-content: space-between; }
        .ear { width: 10px; height: 18px; background: inherit; clip-path: polygon(50% 0, 0 100%, 100% 100%); }
        .halo { display: none; position: absolute; top: -20px; width: 30px; height: 4px; border: 2px solid var(--cyan); border-radius: 50%; }
        .glasses { display: none; position: absolute; top: 12px; width: 100%; height: 6px; background: #000; border: 1px solid var(--safety); z-index: 10; }
        
        .torso { 
            width: 42px; height: 38px; background: #000; border: 2px solid #FFF; 
            margin-top: 2px; font-size: 7px; font-weight: 900; color: #FFF; 
            display: flex; justify-content: center; align-items: center; position: relative;
        }
        .belt { display: none; width: 110%; height: 6px; background: var(--yellow); position: absolute; top: 10px; transform: rotate(-5deg); }

        /* ENEMIES */
        .enemy { position: absolute; bottom: 60px; width: 45px; height: 75px; z-index: 40; display: flex; flex-direction: column; align-items: center; }
        .bot-label { font-size: 8px; background: var(--safety); color: #FFF; padding: 2px; margin-bottom: 2px; }

        #floor { position: absolute; bottom: 0; width: 100%; height: 60px; background: #FFF; border-top: 4px solid var(--safety); }
        #hud { position: absolute; top: 10px; left: 10px; font-weight: 900; background: #000; color: #FFF; padding: 4px 8px; z-index: 200; font-size: 14px; border: 1px solid #FFF; }

        /* OVERLAYS */
        #overlay { 
            position: absolute; inset: 0; background: rgba(0,0,0,0.9); 
            display: flex; flex-direction: column; justify-content: center; 
            align-items: center; z-index: 2000; text-align: center;
        }
        .glitch-btn { 
            background: var(--safety); color: #FFF; border: none; padding: 20px 40px; 
            font-weight: 900; font-size: 1.5rem; cursor: pointer; font-family: inherit; 
        }

        .hit { animation: glitch 0.1s infinite; }
        @keyframes glitch { 0% { filter: hue-rotate(90deg) invert(1); transform: translate(3px); } 100% { filter: hue-rotate(180deg) invert(0); transform: translate(-3px); } }
    </style>
</head>
<body onmousedown="handleJump()" ontouchstart="handleJump()">

<div id="game-container">
    <div id="dock">
        <div style="font-weight:900; font-size: 10px; border-bottom: 2px solid #000;">"ANTI_ROT_CUSTOMS"</div>
        <div class="dock-row" id="color-row"></div>
        <div class="dock-row" id="mod-row"></div>
        <div class="dock-row">
            <span style="font-size:8px; font-weight:900;">SPEED:</span>
            <input type="range" id="speed-input" min="5" max="15" value="7" style="flex-grow:1; accent-color: var(--safety);">
        </div>
    </div>

    <div id="viewport">
        <div id="hud">VIBE: <span id="vibe-val">0</span></div>
        <div id="venue-text">THE_VOID</div>
        
        <div id="p1" class="player">
            <div class="ears" id="m-ears"><div class="ear"></div><div class="ear"></div></div>
            <div class="halo" id="m-halo"></div>
            <div class="head" id="m-head"><div class="glasses" id="m-glasses"></div><div class="teeth" id="m-teeth"></div></div>
            <div class="torso" id="m-torso"><div class="belt" id="m-belt"></div>"USER"</div>
        </div>
        
        <div id="floor"></div>
    </div>

    <div id="overlay">
        <h1 style="color:var(--acid); font-size: 3rem;">GLYPH<br>GRIND</h1>
        <p style="font-size: 10px; margin-bottom: 20px;">[ NO_AI // NO_PROMPTS // PURE_STATIC ]</p>
        <button class="glitch-btn" onclick="startMatch()">"BOOT_SYSTEM"</button>
    </div>
</div>

<script>
    const colors = ['#000', '#FF4500', '#CCFF00', '#00FFFF', '#FF00FF', '#FFF', '#8A2BE2', '#444'];
    const mods = ['ears', 'teeth', 'halo', 'glasses', 'belt'];
    const slogans = ["ANTI_ALGO", "VOID_FEED", "HUMAN_MADE", "NO_ASSETS", "REAL_STATIC", "BURN_THE_CLOUD", "OFF_GRID"];
    const venues = ["THE_VOID", "CATWALK_HELL", "SILICON_PIT", "NULL_ZONE", "PUNK_SECTOR"];

    const game = {
        active: false,
        y: 0, vy: 0, 
        score: 0,
        speed: 7,
        enemies: [],
        slogans: [],
        config: { color: '#000', mods: {} }
    };

    function setupDock() {
        const cRow = document.getElementById('color-row');
        colors.forEach(c => {
            const b = document.createElement('div'); b.className = 'btn'; b.style.background = c;
            b.onclick = (e) => { e.stopPropagation(); game.config.color = c; updateVisuals(); };
            cRow.appendChild(b);
        });
        const mRow = document.getElementById('mod-row');
        mods.forEach(m => {
            const b = document.createElement('div'); b.className = 'btn'; b.innerText = m.toUpperCase();
            b.onclick = (e) => { e.stopPropagation(); game.config.mods[m] = !game.config.mods[m]; b.classList.toggle('active'); updateVisuals(); };
            mRow.appendChild(b);
        });
    }

    function updateVisuals() {
        const h = document.getElementById('m-head');
        const t = document.getElementById('m-torso');
        h.style.background = t.style.background = game.config.color;
        h.style.borderColor = (game.config.color === '#FFF') ? '#000' : '#FFF';
        t.style.color = (game.config.color === '#FFF' || game.config.color === '#00FFFF') ? '#000' : '#FFF';
        
        mods.forEach(m => {
            document.getElementById(`m-${m}`).style.display = game.config.mods[m] ? (m==='ears'?'flex':'block') : 'none';
        });
        document.querySelectorAll('.ear').forEach(e => e.style.background = game.config.color);
    }

    function handleJump() {
        if(game.active && game.y === 0) {
            game.vy = -18;
            if(window.navigator.vibrate) window.navigator.vibrate(15);
        }
    }

    function startMatch() {
        game.active = true;
        game.score = 0;
        game.speed = parseInt(document.getElementById('speed-input').value);
        document.getElementById('overlay').style.display = 'none';
    }

    function spawnSlogan() {
        const s = document.createElement('div');
        s.className = 'punk-quote';
        s.innerText = slogans[Math.floor(Math.random()*slogans.length)];
        s.style.top = (100 + Math.random()*200) + 'px';
        s.x = 500;
        document.getElementById('viewport').appendChild(s);
        game.slogans.push({el: s, x: 500, speed: 2 + Math.random()*2});
    }

    function spawnEnemy() {
        const e = document.createElement('div');
        e.className = 'enemy';
        e.innerHTML = `<div class="bot-label">BOT_BOT</div><div class="head" style="background:var(--safety)"></div><div class="torso" style="background:var(--safety)">"ROT"</div>`;
        e.x = 500;
        document.getElementById('viewport').appendChild(e);
        game.enemies.push({el: e, x: 500});
    }

    function loop() {
        if(game.active) {
            // Physics
            game.y -= game.vy; game.vy += 0.9;
            if(game.y <= 0) { game.y = 0; game.vy = 0; }
            document.getElementById('p1').style.bottom = (60 + game.y) + 'px';

            // Enemy Collision & Move
            game.enemies.forEach((en, i) => {
                en.x -= game.speed; en.el.style.left = en.x + 'px';
                if(en.x < 80 && en.x > 20 && game.y < 40) {
                    game.active = false;
                    document.getElementById('viewport').classList.add('hit');
                    setTimeout(() => {
                        alert("BRAINROT_DETECTED. REBOOTING.");
                        location.reload();
                    }, 100);
                }
                if(en.x < -100) {
                    en.el.remove(); game.enemies.splice(i, 1); game.score++;
                    document.getElementById('vibe-val').innerText = game.score;
                    if(game.score % 5 === 0) document.getElementById('venue-text').innerText = venues[Math.floor(game.score/5) % venues.length];
                }
            });

            // Parallax Slogans
            game.slogans.forEach((sl, i) => {
                sl.x -= sl.speed; sl.el.style.left = sl.x + 'px';
                if(sl.x < -200) { sl.el.remove(); game.slogans.splice(i, 1); }
            });

            if(Math.random() > 0.985) spawnEnemy();
            if(Math.random() > 0.97) spawnSlogan();
        }
        requestAnimationFrame(loop);
    }

    setupDock();
    updateVisuals();
    loop();
</script>
</body>
</html>
