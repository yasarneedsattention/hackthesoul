<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GLYPH-RUN MINIMAL</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<style>
html,body{margin:0;padding:0;background:#000;font-family:monospace;overflow:hidden;}
canvas{display:block;}
.panel{
  position:fixed;top:10px;left:10px;width:260px;border:2px solid #fff;padding:8px;background:#000;font-size:12px;
}
button{width:100%;margin:3px 0;background:#000;color:#fff;border:2px solid #fff;padding:5px;cursor:pointer;font-family:monospace;}
button:hover{background:#fff;color:#000;}
.start{border-color:#FF4500;color:#FF4500;}
#gameOver,#pauseUI{
  position:fixed;inset:0;display:none;align-items:center;justify-content:center;text-align:center;background:rgba(0,0,0,0.7);
}
#jumpBtn,#pauseBtn,#resumeBtn{
  position:fixed;display:flex;align-items:center;justify-content:center;font-size:32px;cursor:pointer;
}
#jumpBtn{bottom:20px;right:20px;width:80px;height:80px;border-radius:40px;background:#FF4500;color:#000;}
#pauseBtn{top:20px;right:20px;width:60px;height:60px;border-radius:30px;background:#FF4500;color:#000;}
#resumeBtn{width:100px;height:40px;border-radius:4px;background:#FF4500;color:#000;margin-top:10px;}
</style>
</head>
<body>
<canvas id="c"></canvas>

<div id="home" class="panel">
<div>"CHARACTER DESIGN"</div>
<div>"BODY"</div>
<button onclick="cycle('bodyShape')">"SHAPE"</button>
<button onclick="cycle('bodyColor')">"COLOR"</button>
<div>"HEAD"</div>
<button onclick="cycle('headType')">"HAIR / HAT"</button>
<button onclick="cycle('eyes')">"EYES"</button>
<button onclick="cycle('mouth')">"MOUTH"</button>
<div>"ACCESSORIES"</div>
<button onclick="cycle('hat')">"HAT"</button>
<button onclick="cycle('glasses')">"GLASSES"</button>
<div>"ARMS & LEGS"</div>
<button onclick="cycle('armShape')">"ARMS"</button>
<button onclick="cycle('legShape')">"LEGS"</button>
<div>"SURFACE"</div>
<button onclick="cycle('surface')">"DETAILS"</button>
<div>"EXPRESSION"</div>
<button onclick="cycle('expression')">"EXPRESSION"</button>
<button onclick="randomize()">"RANDOMIZE"</button>
<button class="start" onclick="startGame()">"START_GAME"</button>
</div>

<div id="pauseUI">
<div>
<div>"PAUSED"</div>
<button id="resumeBtn">"RESUME"</button>
</div>
</div>

<div id="gameOver">
<div>
<div>"GAME_OVER"</div>
<div id="scoreText">"SCORE: 0"</div>
<button onclick="goHome()">"RESTART"</button>
</div>
</div>

<div id="jumpBtn">A</div>
<div id="pauseBtn">II</div>

<script>
/* ========= CANVAS ========= */
const canvas=document.getElementById("c");
const ctx=canvas.getContext("2d");
function resize(){canvas.width=innerWidth;canvas.height=innerHeight;}
window.addEventListener("resize",resize);
resize();

/* ========= CONFIG ========= */
const COLORS=["#FFFFFF","#FF4500","#CCFF00","#F5F5F5","#FFAA00"];
const BODY_SHAPES=4;
const HEAD_TYPES=4;
const EYE_TYPES=4;
const MOUTH_TYPES=3;
const ACCESSORIES=2;
const ARM_TYPES=3;
const LEG_TYPES=3;
const SURFACE_TYPES=3;
const EXPRESSIONS=3;
const WORDS=["VOID","ANTI-ALGO","STAY_STATIC","NO_PROMPT","RAW_SIGNAL","RAW_SIGNAL","SYSTEM_FAIL","LOOP","GLYPH"];
let cfg={bodyShape:0,bodyColor:0,headType:0,eyes:0,mouth:0,hat:0,glasses:0,armShape:0,legShape:0,surface:0,expression:0};

/* ========= PLAYER ========= */
const player={x:120,y:0,vy:0,w:20,h:40};

/* ========= OBSTACLES ========= */
let obstacles=[];
const FLOOR_HEIGHT=70;
const OBSTACLE_WIDTH=26;
const OBSTACLE_MIN=60;
const OBSTACLE_MAX=140;

/* ========= STATE ========= */
let screen="home",paused=false,score=0;

/* ========= INPUT ========= */
function jump(){if(screen==="game"&&!paused)player.vy=-9.5;}
document.addEventListener("keydown",e=>{if(e.code==="Space"||e.code==="ArrowUp")jump();});
document.getElementById("jumpBtn").onclick=jump;
document.getElementById("pauseBtn").onclick=()=>{paused=true;document.getElementById("pauseUI").style.display="flex";};
document.getElementById("resumeBtn").onclick=()=>{paused=false;document.getElementById("pauseUI").style.display="none";};

/* ========= CUSTOMIZATION ========= */
function cycle(k){
  switch(k){
    case"bodyShape":cfg.bodyShape=(cfg.bodyShape+1)%BODY_SHAPES;break;
    case"bodyColor":cfg.bodyColor=(cfg.bodyColor+1)%COLORS.length;break;
    case"headType":cfg.headType=(cfg.headType+1)%HEAD_TYPES;break;
    case"eyes":cfg.eyes=(cfg.eyes+1)%EYE_TYPES;break;
    case"mouth":cfg.mouth=(cfg.mouth+1)%MOUTH_TYPES;break;
    case"hat":cfg.hat=(cfg.hat+1)%ACCESSORIES;break;
    case"glasses":cfg.glasses=(cfg.glasses+1)%ACCESSORIES;break;
    case"armShape":cfg.armShape=(cfg.armShape+1)%ARM_TYPES;break;
    case"legShape":cfg.legShape=(cfg.legShape+1)%LEG_TYPES;break;
    case"surface":cfg.surface=(cfg.surface+1)%SURFACE_TYPES;break;
    case"expression":cfg.expression=(cfg.expression+1)%EXPRESSIONS;break;
  }
}
function randomize(){for(let k in cfg)cycle(k);}

/* ========= FLOW ========= */
function startGame(){
  screen="game";score=0;player.y=canvas.height-FLOOR_HEIGHT-player.h/2;obstacles=[];
  document.getElementById("home").style.display="none";
  document.getElementById("jumpBtn").style.display="flex";
  document.getElementById("pauseBtn").style.display="flex";
}
function goHome(){
  screen="home";
  document.getElementById("home").style.display="block";
  document.getElementById("gameOver").style.display="none";
  document.getElementById("jumpBtn").style.display="none";
  document.getElementById("pauseBtn").style.display="none";
}

/* ========= DRAW PLAYER ========= */
function drawPlayer(x,y){
  ctx.save();
  ctx.translate(x,y);
  // BODY
  ctx.fillStyle=COLORS[cfg.bodyColor];
  switch(cfg.bodyShape){
    case 0:ctx.fillRect(-10,-20,20,40);break;
    case 1:ctx.fillRect(-12,-20,24,40);break;
    case 2:ctx.fillRect(-14,-22,28,44);break;
    case 3:ctx.fillRect(-8,-18,16,36);break;
  }
  // HEAD
  ctx.fillStyle="#F5F5F5";
  if(cfg.headType===0)ctx.fillRect(-8,-32,16,12);
  if(cfg.headType===1)ctx.beginPath(),ctx.arc(0,-28,8,0,Math.PI*2),ctx.fill();
  if(cfg.headType===2)ctx.fillRect(-10,-34,20,10);
  if(cfg.headType===3)ctx.fillRect(-12,-36,24,12);
  // EYES
  ctx.fillStyle="#000";
  switch(cfg.eyes){
    case 0:ctx.fillRect(-5,-30,4,4);ctx.fillRect(1,-30,4,4);break;
    case 1:ctx.fillRect(-5,-29,4,2);ctx.fillRect(1,-29,4,2);break;
    case 2:ctx.fillRect(-5,-30,2,2);ctx.fillRect(3,-30,2,2);break;
    case 3:ctx.fillRect(-6,-31,5,3);ctx.fillRect(1,-31,5,3);break;
  }
  // MOUTH
  if(cfg.mouth===1)ctx.fillRect(-4,-22,8,2);
  if(cfg.mouth===2)ctx.fillRect(-3,-22,6,1);
  // HAT
  if(cfg.hat===1){ctx.fillStyle="#FF4500";ctx.fillRect(-10,-38,20,6);}
  // GLASSES
  if(cfg.glasses===1){ctx.strokeStyle="#CCFF00";ctx.lineWidth=2;ctx.strokeRect(-6,-32,12,6);}
  // ARMS
  ctx.fillStyle=COLORS[cfg.bodyColor];
  if(cfg.armShape===1){ctx.fillRect(-16,-18,6,24);ctx.fillRect(10,-18,6,24);}
  if(cfg.armShape===2){ctx.fillRect(-14,-16,4,20);ctx.fillRect(10,-16,4,20);}
  // LEGS
  if(cfg.legShape===1){ctx.fillRect(-10,20,6,20);ctx.fillRect(4,20,6,20);}
  if(cfg.legShape===2){ctx.fillRect(-8,22,5,18);ctx.fillRect(3,22,5,18);}
  // SURFACE
  if(cfg.surface===1){ctx.strokeStyle="#CCFF00";ctx.lineWidth=1;ctx.strokeRect(-10,-20,20,40);}
  // EXPRESSION
  if(cfg.expression===1){ctx.fillStyle="#FF4500";ctx.fillRect(-2,-25,4,1);}
  if(cfg.expression===2){ctx.fillStyle="#FF4500";ctx.fillRect(-4,-25,8,1);}
  ctx.restore();
}

/* ========= LOOP ========= */
let last=0;
function loop(t){
  requestAnimationFrame(loop);
  const dt=(t-last)/16.666;last=t;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  if(screen==="home"){drawPlayer(canvas.width/2,canvas.height/2);return;}
  if(paused)return;
  // physics
  player.vy+=0.35*dt;player.y+=player.vy*dt;
  const floorY=canvas.height-FLOOR_HEIGHT-player.h/2;
  if(player.y>floorY)player.y=floorY,player.vy=0;
  // obstacles
  if(obstacles.length===0 || obstacles[obstacles.length-1].x<canvas.width-200){
    const h=OBSTACLE_MIN+Math.random()*(OBSTACLE_MAX-OBSTACLE_MIN);
    obstacles.push({x:canvas.width,h});
  }
  // draw background - dynamic with progress
  const gradient=ctx.createLinearGradient(0,0,canvas.width,canvas.height);
  gradient.addColorStop(0,"#111");gradient.addColorStop(1,COLORS[(Math.floor(score/10))%COLORS.length]);
  ctx.fillStyle=gradient;ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.globalAlpha=0.15;
  ctx.fillStyle="#fff";ctx.font="48px monospace";
  ctx.fillText(WORDS[Math.floor(score/5)%WORDS.length],canvas.width*0.2,canvas.height*0.5);
  ctx.globalAlpha=1;
  // obstacles draw
  ctx.fillStyle="#CCFF00";
  for(let o of obstacles){
    o.x-=2.5*dt;
    ctx.fillRect(o.x,canvas.height-FLOOR_HEIGHT-o.h,OBSTACLE_WIDTH,o.h);
    // collision
    if(player.x+player.w/2>o.x && player.x-player.w/2<o.x+OBSTACLE_WIDTH &&
       player.y+player.h/2>canvas.height-FLOOR_HEIGHT-o.h){
      screen="over";
      document.getElementById("scoreText").textContent=`"SCORE: ${Math.floor(score)}"`;
      document.getElementById("gameOver").style.display="flex";
      document.getElementById("jumpBtn").style.display="none";
      document.getElementById("pauseBtn").style.display="none";
    }
  }
  obstacles=obstacles.filter(o=>o.x>-50);
  // score
  score+=dt*0.5;
  ctx.fillStyle="#fff";ctx.font="28px monospace";
  ctx.fillText(`"SCORE: ${Math.floor(score)}"`,20,40);
  drawPlayer(player.x,player.y);
}
requestAnimationFrame(loop);
</script>
</body>
</html>
